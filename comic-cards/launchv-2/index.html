<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8" />
  <title>Event Cards</title>
  <link rel="stylesheet" href="style.css">
  <!-- Existing viewport/cookie script -->
  <script>
    (function(d){
      function C(k){ return (d.cookie.match('(^|; )'+k+'=([^;]*)')||0)[2]; }
      var ua = navigator.userAgent,
          ismobile = / mobile/i.test(ua),
          mgecko = !!(/ gecko/i.test(ua) && / firefox\//i.test(ua)),
          wasmobile = C('wasmobile') === "was",
          desktopvp = 'user-scalable=yes, maximum-scale=2',
          el;
      if(ismobile && !wasmobile){
          d.cookie = "wasmobile=was";
      } else if (!ismobile && wasmobile){
          if (mgecko) {
              el = d.createElement('meta');
              el.setAttribute('content',desktopvp);
              el.setAttribute('name','viewport');
              d.getElementsByTagName('head')[0].appendChild(el);
          } else {
              d.getElementsByName('viewport')[0].setAttribute('content',desktopvp);
          }
      }
    }(document));
  </script>
  
  <!-- Our hyperlink function and dictionary -->
  <script>
    // Define dictionary of names and corresponding URLs.
    const nameDictionary = {
    "Frederick Luis Aldama": "",
    "Dani Orozco": "",
    "Rachel González-Martin": "https://liberalarts.utexas.edu/mals/faculty/rvg225",
    "Ngozi Ukazu": "https://www.ngoziu.com/",
    "Larry Rattner": "https://www.imdb.com/name/nm0711910/",
    "Benson Latin American Collection": "https://www.lib.utexas.edu/about/locations/benson",
    "Enrique García": "https://www.middlebury.edu/college/people/enrique-garcia-0",
    "Patrick Lugo": "https://www.instagram.com/plugoarts/",
    "Lee Franscis IV": "https://www.instagram.com/dr.indiginerd/",
    "Mike \"Chicano Batman\" Garcia": "https://www.instagram.com/mgarcia5159/",
    "Jiba Molei Anderson": "http://www.griotenterprises.com/",
    "José Morey": "https://www.linkedin.com/in/drjosemorey",
    "Lydia CdeBaca-Cruz": "",
    "Paty Abril-Gonzalez": "https://education.utexas.edu/faculty/patricia_holt/",
    "Fredie \"Primo\" Mejia": "https://myprimospodcast.com/about",
    "Corey Davis": "https://www.rocbottomstudios.com/",
    "Darius Yancy": "https://www.instagram.com/yancyhousepublishing/",
    "Stanford Carpenter": "https://www.linkedin.com/in/stanford-w-carpenter-phd-46658a5",
    "Ernesto Cuevas Jr": "https://www.ernestocuevasjr.com/",
    "Kevin Garcia": "https://www.linkedin.com/in/kevin-garcia-dot-com",
    "Angela Sanchez": "https://angelamsanchez.com/",
    "Tito & Chente": "",
    "Domino Perez": "",
    "Joey Lopez": "https://artsci.tamu.edu/comm-journalism/contact/profiles/joseph-lopez.html",
    "Musical Guest: Rico-ico": "https://www.instagram.com/rico_ico_musica/",
    "Gabriel Lopez": "https://www.linkedin.com/in/gabriel-lopez-112220152",
    "Ayden Castellanos": "https://www.instagram.com/sustopodcast/",
    "Kiana T. Murphy": "https://vivo.brown.edu/display/kmurph37",
    "Ray Mendoza Landa": "https://www.instagram.com/raydiosilence/?hl=en",
    "D'Arcee Charington Neal": "https://www.linkedin.com/in/d-arcee-neal-phd-08447a21",
    "Leticia Urieta": "https://leticiaaurieta.com/",
    "Frederick Luis Aldama__1": "",
    "Héctor Rodriguez III": "https://www.linkedin.com/in/hector-rodriguez-iii-50bb3115b",
    "Bahar Momeni": "https://www.baharmomeni.com/",
    "Caroline De La Garza": "https://www.instagram.com/13.c.e/?igsh=cXlvNHo4Z2g1a3V6",
    "Felipe Esquivel": "",
    "Cristina Casas": "https://library.austintexas.libguides.com/prf.php?id=61c53fa2-7cdb-11ed-9922-0ad758b798c3",
    "Profe Latinx": "",
    "1607 San Jacinto Blvd": "",
    "Leticia Urieta__1": "https://leticiaaurieta.com/",
    "Osmani R Alcaraz-Ocha": "https://events.getcreativesanantonio.com/artist/osmani-r-alcaraz-ochoa/",
    "Ismael Vásquez Bernabé": "",
    "Dante Olivas": "https://chicanos.unm.edu/people/grads/dante-olivas.html",
    "Dianita Vargas": "https://www.artbydianita.com/",
    "J. Gonzo": "https://imagecomics.com/creators/j-gonzo",
    "Paloma Aguirre": "https://www.instagram.com/palomanoseinabook/",
    "Mr. Jose Perales": "https://sanchez.austinschools.org/programs/grade-levels/first-grade",
    "Lee Francis IV": "https://www.instagram.com/dr.indiginerd/",
    "Regina Mills": "https://artsci.tamu.edu/english/contact/profiles/regina-mills.html",
    "Pablo Leon": "https://artsypabster.com/",
    "Tito": "https://toontito.neocities.org/?fbclid=PAZXh0bgNhZW0CMTEAAaaJlwy1yAd48C_U4xGeFK8O0R8rbE1rddro9o9U0Uq4VUhkFURYgQJ9V4M_aem_Pjb0VP8QfyTHnjeajmjf4Q",
    "Joanna Davis-McElligatt": "https://english.unt.edu/people/joanna-davis-mcelligatt-phd.html",
    "Jaime Hernandez": "https://en.wikipedia.org/wiki/Jaime_Hernandez",
    "Elizabeth M. Bradshaw": "https://wileyc.libguides.com/prf.php?id=62ca6d79-7cdb-11ed-9922-0ad758b798c3",
    "Kim Bishop": "https://www.kimbishopart.com/",
    "John Jennings": "https://www.johnjenningsstudio.com/",
    "Miki Ramirez": "https://osoincstudios.wixsite.com/my-site",
    "Emmanuel Valtierra": "https://emmanuelvaltierra.com/",
    "Austin, TX 78701": "",
    "Gabriel Rodríguez Lemus, Jr.": "",
    "Erika Said": "https://www.linkedin.com/in/erika-said-530343264",
    "Travis Torres Thompson": "https://chicanos.unm.edu/people/grads/travis-torres-thompson.html",
    "Robert Carmichael": "https://www.instagram.com/thirsty_jack803/profilecard/?igsh=d245aWdqMDJrMWQ5",
    "Ho-Seh Esquivel": "http://www.alto-shorter.com/",
    "Henry Barajas": "https://imagecomics.com/creators/henry-barajas",
    "Miguel Hernández": "https://www.instagram.com/miguelangelhdzart/",
    "Rene Arteaga": "https://liberalarts.utexas.edu/ams/gradstudents/rxa73",
    "Cecilia Holt": "",
    "Eliamaría Madrid": "https://spicedeliastrations.carrd.co/",
    "Marc Sanchez": "https://www.instagram.com/bigpavvo/?hl=en",
    "Dr. Intergalactic": "",
    "Lilia Rosas": "https://www.resistenciabooks.com/",
    "Chente": "https://vinnyvistazo.com/",
    "Christian Hines": "https://faculty.txst.edu/profile/2457804",
    "Lalo Alcaraz": "https://laloalcaraz.com/",
    "Majestie Varnado": "https://www.linkedin.com/in/majestie-varnado-68505b1b6",
    "Margarita Castromán": "https://profiles.rice.edu/faculty/margarita-castroman-soto",
    "Kat Deck-Portillo": "https://colfa.utsa.edu/faculty/profiles/deck-portillo-katherine.html",
    "Peter Murrieta": "https://www.linkedin.com/in/peter-murrieta-273a508",
    "Plus Waco Comics": "http://pluswacocomics.com/",
    "Armando Estrada": "https://www.instagram.com/todochid0/?hl=en",
    "Anthony Jackson": "https://artsci.tamu.edu/sociology/people/profiles/anthony-s-jackson.html",
    "Luis Valderas": "https://www.luisvalderasartist.com/",
    "Colton Campbell": "https://chicanos.unm.edu/people/grads/colton-campbell.html",
    "José Alaniz": "https://www.flowersongpress.com/authors-ah/jos-alaniz",
    "Sienna Wright": "https://www.instagram.com/artbysien/",
    "José Luis Martínez": "https://www.instagram.com/huitzilotoons/",
    "Samantha Ceballos": "https://liberalarts.utexas.edu/english/gradstudents/sjc3572",
    "Emi Holt": "",
    "Edward Vidaurre": "https://edwardvidaurre.com/",
    "Sohee Kim": "https://liberalarts.tamu.edu/resi/profile/sohee-kim/",
    "Getse Pérez": "https://mx.linkedin.com/in/getsemani-perez",
    "Dan Johnson": "https://www.linkedin.com/in/danjohnson8",
    "Juan C. Escobedo": "https://www.instagram.com/x_j.esc/",
    "Gabriel Hernandez": "https://coywolfcomic.com/",
    "Adrian Villegas": "https://www.instagram.com/adrian.d.villegas/?hl=enhttps://www.instagram.com/adrian.d.villegas/?hl=en",
    "Jaime Javier Rodriguez": "https://lmas.unt.edu/people/dr-jaime-javier-rodriguez.html",
    "Chris Peraza": "https://www.instagram.com/crispyart3d/",
    "Jay Kalagayan": "https://www.linkedin.com/in/kalagayan",
    "Rose Padilla": "https://liberalarts.utexas.edu/english/gradstudents/rp38323",
    "Bill Nericcio": "https://literature.sdsu.edu/people/nericcio",
    "Joseline González-Ajanel": "https://artsci.tamu.edu/english/contact/profiles/joseline-gonzalez-ajanel.html",
    "Christina E. Taylor": "https://www.christinaetaylor.net/home",
    "Guilermina Zabala": "https://colfa.utsa.edu/faculty/profiles/zabalasuarez-guillermina.html",
    "Wilfred Esteves": "https://m.tapas.io/series/Thorn-Squadron/info",
    "Chispa Comics": "https://www.instagram.com/chispacomics/",
    "Peter Bonfitto": "https://admc.austincc.edu/art/peter-bonfitto/",
    "Andrea Escalante": "",
    "Sasha Sanders": "https://coms.calpoly.edu/dr-sasha-sanders",
    "Rafael Flores Jr.": "https://www.instagram.com/camazotzcomics/",
    "Brandy González": "https://www.instagram.com/gonzalezoriginal/?hl=en",
    "MexAmericon": "https://www.mexamericon.com/",
    "Scott Russell Duncan": "https://www.scottrussellduncan.com/#/",
    "Sueitko Zamorano-Chavez": "http://www.2spiritqueer.shop",
    "Malcolm Harris": "https://www.imdb.com/name/nm8348236/",
    "Raisa Alvarado": "https://www.csusb.edu/profile/raisa.alvarado"
  };

    // This function loops through the dictionary and replaces any whole-word
    // occurrences of a name in the input text with an anchor element.
    function hyperlinkText(text) {
      for (const name in nameDictionary) {
        let url = nameDictionary[name];
        // Only replace if the URL is a non-empty, non-whitespace string.
        if (url && url.trim().length > 0) {
          const regex = new RegExp(`\\b${name}\\b`, "g");
          text = text.replace(regex, `<a href="${url}">${name}</a>`);
        }
      }
      return text;
    }
  </script>
</head>
<body>

  <!-- Container for our generated cards -->
  <div id="container">
    <!-- Day containers -->
    <div id="card-container-1" class="day-container">
        <h2>Thursday, 03/06/2025</h2>
    </div>
    
    <div id="card-container-2" class="day-container">
        <h2>Friday, 03/07/2025</h2>
    </div>
    
    <div id="card-container-3" class="day-container">
        <h2>Saturday, 03/08/2025</h2>
    </div>
  </div>

  <script>
    /**
     * Fetch the JSON file and return the array of event objects.
     */
    async function loadEvents() {
      const response = await fetch('events.json');
      const events = await response.json();
      return events;
    }

    /**
     * Build and display cards for each event object.
     */
    function displayCards(events) {
      events.forEach(event => {
        // Create the main card container
        const card = document.createElement('div');
        card.classList.add('card');

        // ===== Card Image Section =====
        const cardImage = document.createElement('div');
        const typeClass = event.Type.toLowerCase();
        cardImage.classList.add('card-image', typeClass);

        // Event Type
        const typeHeading = document.createElement('h2');
        typeHeading.textContent = event.Type;
        cardImage.appendChild(typeHeading);

        // Time Range
        const timeP = document.createElement('p');
        timeP.innerHTML = `${event['Start Time']} -<br>${event['End Time']}`;
        cardImage.appendChild(timeP);

        // Location
        const locationP = document.createElement('p');
        locationP.classList.add('location');
        locationP.textContent = event.Location;
        cardImage.appendChild(locationP);

        card.appendChild(cardImage);

        // ===== Card Text Section =====
        const cardText = document.createElement('div');
        cardText.classList.add('card-text');
        if (event.Special.toUpperCase() === 'TRUE') {
          cardText.classList.add('card-text-special');
        }

        // Title
        const titleH2 = document.createElement('h2');
        titleH2.textContent = event.Title;
        cardText.appendChild(titleH2);

        // Moderator
        const moderatorP = document.createElement('p');
        if (event.Type === 'Break' || event.Type === 'Awards') {
          moderatorP.classList.add('no-show');
        }
        // For events with a moderator/facilitator, run the text through hyperlinkText
        if (event.Type === "Workshop" || event.Type === "Screening") {
          moderatorP.innerHTML = `<b>Facilitator:</b> ${hyperlinkText(event.Moderator)}`;
        } else if ( event.Type === "Panel" ) {
          moderatorP.innerHTML = `<b>Moderator:</b> ${hyperlinkText(event.Moderator)}`;
        } else if (event.Type === "AfterHours") {
          moderatorP.innerHTML = hyperlinkText(event.Moderator);
        }
        cardText.appendChild(moderatorP);

        // Panelists (if any)
        const panelists = [];
        for (let i = 1; i <= 6; i++) {
          const key = `Panelist ${i}`;
          if (event[key]) {
            panelists.push(event[key]);
          }
        }
        const panelistP = document.createElement('p');
        if (event.Type === "Panel") {
          panelistP.innerHTML = `<b>Panelists:</b> ${hyperlinkText(panelists.join(', '))}`;
        } else if (event.Type === "AfterHours") {
          panelistP.innerHTML = hyperlinkText(panelists.join(', '));
        } else if(event.Type === "Screening") {
          panelistP.innerHTML = `<b>Panelists:</b> ${hyperlinkText(panelists.join(', '))}</br> </br><b>Location:</b> Latinx Pop Lab`;
        } else {
          panelistP.classList.add('no-show');
        }
        cardText.appendChild(panelistP);

        card.appendChild(cardText);

        // ===== Expiration Check =====
        const datePart = event.Day.split(', ')[1];
        const endTimeStr = event["End Time"];
        const eventEnd = new Date(`${datePart} ${endTimeStr} CST`);
        const now = new Date();
        if (now > eventEnd) {
          card.classList.add('no-show');
        }
        
        // Determine the correct container based on the event day.
        let containerId = '';
        switch (event.Day) {
          case 'Thursday, 03/06/2025':
            containerId = 'card-container-1';
            break;
          case 'Friday, 03/07/2025':
            containerId = 'card-container-2';
            break;
          case 'Saturday, 03/08/2025':
            containerId = 'card-container-3';
            break;
          default:
            break;
        }
        if (containerId) {
          document.getElementById(containerId).appendChild(card);
        }
      });
    }

    // Load the events from JSON and display them.
    loadEvents()
      .then(events => {
        displayCards(events);
      })
      .catch(err => {
        console.error('Error loading JSON:', err);
      });
  </script>
  
</body>
</html>
